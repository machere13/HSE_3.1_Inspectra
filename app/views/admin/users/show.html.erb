<main class="PageAdminUserShow">
  <h1><%= t('admin.users.show.title') %></h1>
  
  <p><%= link_to t('admin.users.show.back_to_list'), admin_users_path %></p>
  
  <%= render 'shared/organisms/O_ControlPanelTable',
      title: t('admin.users.show.user_info'),
      actions: link_to(t('admin.users.show.edit'), edit_admin_user_path(@user)) do %>
    <%= render 'shared/collections/C_ControlPanelTableHeaderRow', cells: [
      'Field',
      'Value'
    ] %>
    <%= render 'shared/collections/C_ControlPanelTableRow', cells: [
      'ID',
      @user.id
    ] %>
    <%= render 'shared/collections/C_ControlPanelTableRow', cells: [
      'Email',
      @user.email
    ] %>
    <%= render 'shared/collections/C_ControlPanelTableRow', cells: [
      t('admin.users.show.role'),
      t("admin.users.roles.#{@user.role}")
    ] %>
    <%= render 'shared/collections/C_ControlPanelTableRow', cells: [
      t('admin.users.show.email_verified'),
      @user.email_verified? ? t('admin.users.show.yes') : t('admin.users.show.no')
    ] %>
    <%= render 'shared/collections/C_ControlPanelTableRow', cells: [
      t('admin.users.show.registered'),
      @user.created_at.in_time_zone.strftime('%d.%m.%Y %H:%M')
    ] %>
    <%= render 'shared/collections/C_ControlPanelTableRow', cells: [
      t('admin.users.show.updated'),
      @user.updated_at.in_time_zone.strftime('%d.%m.%Y %H:%M')
    ] %>
  <% end %>
  
  <%= render 'shared/organisms/O_ControlPanelTable',
      title: t('admin.users.show.achievements') do %>
    <% if @user_achievements.any? %>
      <%= render 'shared/collections/C_ControlPanelTableHeaderRow', cells: [
        'Achievement',
        'Status'
      ] %>
      <% @user_achievements.each do |ua| %>
        <%= render 'shared/collections/C_ControlPanelTableRow', cells: [
          ua.achievement.name,
          ua.completed_at ? "#{t('admin.users.show.completed')}: #{ua.completed_at.in_time_zone.strftime('%d.%m.%Y %H:%M')}" : "#{t('admin.users.show.progress')}: #{ua.progress}%"
        ] %>
      <% end %>
    <% else %>
      <p><%= t('admin.users.show.no_achievements') %></p>
    <% end %>
  <% end %>
</main>

