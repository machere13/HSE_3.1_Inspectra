<h1>Контент недели <%= @week.number %></h1>

<p><%= link_to 'Добавить контент', new_admin_week_content_item_path(@week) %></p>

<% if @pagy.count > 0 %>
  <p><%= @pagy.from %>-<%= @pagy.to %> из <%= @pagy.count %></p>
<% end %>

<table>
  <thead>
    <tr>
      <th>#</th>
      <th>Тип</th>
      <th>Заголовок</th>
      <th>URL</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @content_items.each do |ci| %>
      <tr>
        <td><%= ci.position %></td>
        <td><%= ci.kind %></td>
        <td><%= link_to(ci.title.presence || '(без названия)', admin_week_content_item_path(@week, ci)) %></td>
        <td><%= ci.url %></td>
        <td>
          <%= link_to 'Редактировать', edit_admin_week_content_item_path(@week, ci) %> |
          <%= button_to 'Удалить', admin_week_content_item_path(@week, ci), method: :delete, form: { data: { turbo_confirm: 'Удалить этот контент?' }, style: 'display:inline' } %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= pagy_nav(@pagy) if @pagy.pages > 1 %>

<%= link_to 'Назад к неделе', admin_week_path(@week) %>
