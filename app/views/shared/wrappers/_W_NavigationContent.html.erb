<% if local_assigns[:admin_navigation] %>
  <%
    is_admin_week_page = request.path.match?(%r{^/admin/weeks/}) && !@week.nil? && @week.persisted?
    admin_navigation_items = [
      { text: 'DASHBOARD', href: admin_dashboard_path, hotkey: 'D' },
      { text: 'USERS', href: admin_users_path, hotkey: 'U' },
      { text: 'WEEKS', href: admin_weeks_path, hotkey: 'W' }
    ]
    week_navigation_items = nil
    if is_admin_week_page
      week_navigation_items = [
        { text: 'СТАТЬИ', href: admin_week_articles_path(@week), hotkey: 'A' },
        { text: 'КОНТЕНТ', href: admin_week_content_items_path(@week), hotkey: 'C' }
      ]
    end
  %>
  <div class="W_NavigationContent">
    <%= render 'shared/wrappers/W_NavigationItems', index: 0, items: admin_navigation_items %>
    <% if week_navigation_items %>
      <%= render 'shared/wrappers/W_NavigationItems', index: 1, items: week_navigation_items %>
    <% end %>
  </div>
<% else %>
  <% is_home = request.path == '/' || request.path == '/pages/home' %>
  <% is_week_page = request.path.include?('/weeks/') %>
  <% is_article_page = request.path.include?('/articles/') %>
  <% is_project_page = request.path == '/project' || request.path == project_path %>
  <% 
    article_count = is_week_page && defined?(@week) ? @week.articles.count : 0
    filter_items = is_week_page && defined?(@content_counts) ? [
      { label: "Articles (#{article_count})", value: 'article', checked: false },
      { label: "Image (#{@content_counts['image'] || 0})", value: 'image', checked: false },
      { label: "GIF (#{@content_counts['gif'] || 0})", value: 'gif', checked: false },
      { label: "Video (#{@content_counts['video'] || 0})", value: 'video', checked: false },
      { label: "Audio (#{@content_counts['audio'] || 0})", value: 'audio', checked: false },
      { label: "Link (#{@content_counts['link'] || 0})", value: 'link', checked: false }
    ] : []
    navigation_items = [
      { text: 'HOME', href: root_path, hotkey: 'H' },
      { text: 'PROJECT', href: project_path, hotkey: 'P' }
    ]
    if defined?(current_user) && current_user&.email_verified?
      navigation_items << { text: 'PROFILE', href: profile_path, hotkey: 'P' }
    else
      navigation_items << { text: 'AUTH', href: auth_path, hotkey: 'A' }
    end
  %>

  <div class="W_NavigationContent">
    <%= render 'shared/wrappers/W_NavigationItems', index: 0, items: navigation_items %>

    <% if is_week_page %>
      <%= render 'shared/wrappers/W_NavigationItems', index: 1, items: filter_items, radio: true %>
    <% elsif is_project_page %>
      <%= render 'shared/wrappers/W_NavigationItems', index: 1, items: [
        { text: 'MAIN', href: '#main' },
        { text: 'PROJECT', href: '#project' },
        { text: 'MODULES', href: '#modules' },
        { text: 'INFO', href: '#info' },
      ] %>
    <% elsif !is_article_page %>
      <%= render 'shared/wrappers/W_NavigationItems', index: 1, items: [
        { text: 'BLOCKS', href: '#blocks' }
      ], style: is_home ? 'visibility: hidden; opacity: 0; height: 0;' : '' %>
    <% end %>
  </div>
<% end %>